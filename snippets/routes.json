{
  "create get endpoint": {
    "prefix": "a-routes-get",
    "body": [
      "${1:app}.get('${2:path}', (req, res)=>{",
      "\t$3",
      "});"
    ],
    "description": "Creates a get endpoint."
  },
  "get params.id": {
    "prefix": "a-routes-get-params-id",
    "body": [
        "// Read a specific resource by ID http://localhost:3000/api/resources/:id",
        "app.get('/api/resources/:id', (req, res) => {",
        "  const resourceId = parseInt(req.params.id);",
        "  const resource = resources.find((r) => r.id === resourceId);",
        "",
        "  if (resource) {",
        "    res.json(resource);",
        "    //res.render(`pages-blog/blog`, {post});",
        "  } else {",
        "    res.status(404).json({ error: 'Resource not found' });",
        "  }",
        "});"
    ],
    "description": "get id with params"
},
"full crud functions on product": {
    "prefix": "a-routes-crud-product",
    "body": [
        "// Sample in-memory database",
        "let resources = [",
        " { id: 1, name: 'Resource 1' },",
        " { id: 2, name: 'Resource 2' },",
        "];",
        "",
        "// CRUD Operations",
        "",
        "// Read all resources http://localhost:3000/api/resources",
        "app.get('/api/resources', (req, res) => {",
        " res.json(resources);",
        "});",
        "",
        "// Read a specific resource by ID http://localhost:3000/api/resources/:id",
        "app.get('/api/resources/:id', (req, res) => {",
        "  const resourceId = parseInt(req.params.id);",
        "  const resource = resources.find((r) => r.id === resourceId);",
        "",
        "  if (resource) {",
        "    res.json(resource);",
        "  } else {",
        "    res.status(404).json({ error: 'Resource not found' });",
        "  }",
        "});",
        "",
        "// Create a new resource http://localhost:3000/api/resources",
        "app.post('/api/resources', (req, res) => {",
        " const newResource = req.body;",
        " resources.push(newResource);",
        " res.status(201).json(newResource);",
        "});",
        "",
        "// Update a resource by ID http://localhost:3000/api/resources/:id",
        "app.put('/api/resources/:id', (req, res) => {",
        " const resourceId = parseInt(req.params.id);",
        " const updatedResource = req.body;",
        "",
        " resources = resources.map(",
        "  (r) => r.id === resourceId ? { ...r, ...updatedResource } : r );",
        "",
        " res.json({ message: 'Resource updated successfully' });",
        "});",
        "",
        "// Delete a resource by ID http://localhost:3000/api/resources/:id",
        "app.delete('/api/resources/:id', (req, res) => {",
        " const resourceId = parseInt(req.params.id);",
        " resources = resources.filter((r) => r.id !== resourceId);",
        " res.json({ message: 'Resource deleted successfully' });",
        "});"
    ],
    "description": "full crud functions on product"
},
  "render a view": {
    "prefix": "a-routes-get-render",
    "body": [
      "${1:app}.get('${2:path}', (req, res)=>{",
      "\tres.render('${3:ejsFile}');",
      "});"
    ],
    "description": "Render an ejs file."
  },
  "render a view with data": {
    "prefix": "a-routes-get-render2",
    "body": [
      "${1:app}.get('${2:path}', (req, res)=>{",
      "\tres.render('${3:ejsFile}', {${4:key}:${5:value}});",
      "});"
    ],
    "description": "Render an ejs file."
  },
  "register user": {
    "prefix": "a-routes-register",
    "body": [
      "app.post('/register', function(req, res){",
      "    // console.log(req.body.username);",
      "    // console.log(req.body.password);",
      "    User.register(new User({",
      "        username: req.body.username,",
      "        email: req.body.email}), ",
      "        req.body.password, function(err, user){",
      "        if(err){",
      "            console.log(err);",
      "            return res.render('register');",
      "        }",
      "        passport.authenticate('local')(req, res, function(){",
      "            res.redirect('/secret');",
      "        });",
      "    });",
      "});"
    ],
    "description": "register user"
  },
  "usermanagement with form": {
    "prefix": "a-routes-usermanag-form",
    "body": [
      "app.get('/secret', isLoggedIn, function(req, res){",
      "    console.log(req.user.username)",
      "    res.render('secret', {user: req.user});",
      "});",
      "",
      "app.get('/register', function(req, res){",
      "    res.render('register');",
      "});",
      "",
      "// handeling user sign up",
      "app.post('/register', function(req, res){",
      "    // console.log(req.body.username);",
      "    // console.log(req.body.password);",
      "    User.register(new User({",
      "        username: req.body.username,",
      "        email: req.body.email}), ",
      "        req.body.password, function(err, user){",
      "        if(err){",
      "            console.log(err);",
      "            return res.render('register');",
      "        }",
      "        passport.authenticate('local')(req, res, function(){",
      "            res.redirect('/secret');",
      "        });",
      "    });",
      "});",
      "",
      "// Login Form",
      "app.get('/login', function(req, res){",
      "    res.render('login');",
      "});",
      "",
      "// Login Logic",
      "// middleware",
      "app.post('/login', passport.authenticate('local',{",
      "    successRedirect: '/secret',",
      "    failureRedirect: '/login'",
      "}), function(req, res){",
      "    ",
      "});",
      "",
      "// Logout",
      "app.get('/logout', function(req, res, next) {",
      "    req.logout(function(err) {",
      "      if (err) { return next(err); }",
      "      res.redirect('/');",
      "    });",
      "  });",
      "",
      "// check isLoggedIn",
      "function isLoggedIn(req, res, next){",
      "    if(req.isAuthenticated()){",
      "        return next();",
      "    }",
      "    res.redirect('/login');",
      "}"
    ],
    "description": "usermanagement with form"
  },
  "ai gen user-man forms": {
    "prefix": "a-routes-usermanag-form2",
    "body": [
        "const express = require('express');",
        "const mongoose = require('mongoose');",
        "const passport = require('passport');",
        "const LocalStrategy = require('passport-local').Strategy;",
        "const session = require('express-session');",
        "const MongoStore = require('connect-mongo');",
        "const User = require('./models/User');",
        "",
        "const app = express();",
        "",
        "// Connect to MongoDB",
        "mongoose.connect('mongodb+srv://TestTest:TestTest@goldtrade.skpkklp.mongodb.net/', {",
        "  useNewUrlParser: true,",
        "  useUnifiedTopology: true,",
        "});",
        "",
        "// Middleware",
        "app.set('view engine', 'ejs');",
        "app.use(express.urlencoded({ extended: true }));",
        "",
        "// Express session",
        "app.use(session({",
        "  secret: 'yourSecretKey',",
        "  resave: false,",
        "  saveUninitialized: false,",
        "  store: MongoStore.create({ mongoUrl: 'mongodb+srv://TestTest:TestTest@goldtrade.skpkklp.mongodb.net/' })",
        "}));",
        "",
        "// Initialize Passport.js",
        "app.use(passport.initialize());",
        "app.use(passport.session());",
        "",
        "// Configure Passport.js to use the User model",
        "passport.use(User.createStrategy());",
        "passport.serializeUser(User.serializeUser());",
        "passport.deserializeUser(User.deserializeUser());",
        "",
        "a-",
        "",
        "",
        "// Routes",
        "",
        "// Home route",
        "app.get('/', (req, res) => {",
        "  res.render('index', { user: req.user });",
        "});",
        "",
        "// Register route",
        "app.get('/register', (req, res) => {",
        "  res.render('register');",
        "});",
        "",
        "app.post('/register', async (req, res) => {",
        "  try {",
        "    const { username, age, password } = req.body;",
        "    const newUser = new User({ username, age });",
        "",
        "    await User.register(newUser, password);",
        "    res.redirect('/login');",
        "  } catch (err) {",
        "    res.send('Error registering user: ' + err.message);",
        "  }",
        "});",
        "",
        "// Login route",
        "app.get('/login', (req, res) => {",
        "  res.render('login');",
        "});",
        "",
        "app.post('/login', passport.authenticate('local', {",
        "  successRedirect: '/profile',",
        "  failureRedirect: '/login'",
        "}));",
        "",
        "// Profile route (protected)",
        "app.get('/profile', isAuthenticated, (req, res) => {",
        "  res.render('profile', { user: req.user });",
        "});",
        "",
        "// Logout route",
        "app.get('/logout', (req, res) => {",
        "  req.logout(err => {",
        "    if (err) { return next(err); }",
        "    res.redirect('/');",
        "  });",
        "});",
        "",
        "// Middleware to check authentication",
        "function isAuthenticated(req, res, next) {",
        "  if (req.isAuthenticated()) {",
        "    return next();",
        "  }",
        "  res.redirect('/login');",
        "}",
        "",
        "// Start server",
        "app.listen(8000, () => {",
        "  console.log('Server started on http://localhost:8000');",
        "});"
    ],
    "description": "ai gen user-man mit forms"
},
  "usermanagement with postman": {
    "prefix": "a-routes-usermanag-postman",
    "body": [
      "/*",
      "  Login routes -- This is where we will use the 'local'",
      "  passport authenciation strategy. If success, send to",
      "  /login-success, if failure, send to /login-failure",
      "*/",
      "app.post('/login', passport.authenticate('local', { ",
      "  failureRedirect: '/login-failure', ",
      "  successRedirect: '/login-success'",
      "}), (err, req, res, next) => {",
      "  if (err) next(err);",
      "});",
      "",
      "app.get('/login-failure', (req, res, next) => {",
      "  console.log(req.session);",
      "  res.send('Login Attempt Failed.');",
      "});",
      "",
      "app.get('/login-success', (req, res, next) => {",
      "  console.log(req.session);",
      "  res.send('Login Attempt was successful.');",
      "});",
      "",
      "",
      "",
      "app.get('/logout', function(req, res, next) {",
      "    req.logout(function(err) {",
      "        if (err) { return next(err); }",
      "        console.log('you are logging out.')",
      "        res.redirect('/profile');",
      "    });",
      "});",
      "/*",
      "  Protected Route -- Look in the account controller for",
      "  how we ensure a user is logged in before proceeding.",
      "",
      "  We call 'isAuthenticated' to check if the request is ",
      "  authenticated or not. ",
      "*/",
      "app.get('/profile', function(req, res) {",
      "  console.log(req.session)",
      "  if (req.isAuthenticated()) {",
      "    res.json({ message: 'You made it to the secured profie' })",
      "  } else {",
      "    res.json({ message: 'You are not authenticated' })",
      "  }",
      "})"
    ],
    "description": "usermanagement with postman"
  },
  "complex routes": {
    "prefix": "a-routes-complex",
    "body": [
        "see course.routes"
    ],
    "description": "complex routes in course"
},
  "routes new file": {
    "prefix": "a-routes-new file",
    "body": [
      "const express = require('express');",
      "const router = express.Router();",
      "",
      "let tasks = [];",
      "",
      "router.get('/', (req, res) => {    ",
      "    console.log('some test');    ",
      "    res.render('todo', {tasks:tasks, date: new Date()});  ",
      "})",
      "",
      "router.post('/add', (req, res) => {",
      "    const {task} = req.body;",
      "    tasks.push(task);",
      "    res.redirect('/todo');",
      "});",
      "",
      "module.exports = router;"
    ],
    "description": "routes new file"
  }
}